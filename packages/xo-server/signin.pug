doctype html
html
  head
    meta(charset = 'utf-8')
    meta(http-equiv = 'X-UA-Compatible' content = 'IE=edge,chrome=1')
    meta(name = 'viewport' content = 'width=device-width, initial-scale=1.0')
    title Xen Orchestra
    meta(name = 'author' content = 'Vates SAS')
    link(rel = 'stylesheet' href = 'index.css')
    link(rel = 'icon' href = 'assets/favicon.svg' type = 'image/svg+xml')
    style.
      body {
        color: #F8F8F8;
        background-color: #111225;
      }
      button {
        background-color: #8F84FF;
      }
      .error {
        color: #EC535D;
      }
      @media (prefers-color-scheme: light) {
        body {
          color: #1A1B38;
          background-color: #FFFFFF;
        }
        .error {
          color: #BE1621;
        }
      }
  body(style = 'display: flex; height: 100vh;')
    div(style = 'margin: auto; width: 20em;')
      div(style = 'display: flex;')
        img(src = 'assets/logo.svg' style = 'margin: auto;')
      h2.text-xs-center.mb-2 Welcome to
        svg(viewbox='65 622 735 64' xmlns='http://www.w3.org/2000/svg' fill='currentColor')
          g
            polygon(points='120.48 684.92 106.08 684.92 92.38 664.14 80.22 684.92 66.35 684.92 82.14 659.25 103.51 659.25 120.48 684.92')
            polygon(points='119.54 624.06 104.07 649.22 82.04 649.22 65.41 624.06 79.81 624.06 93.51 644.84 105.66 624.06 119.54 624.06')
            path(d='M143.06,633.73v15.77h21.55v9.31h-21.55v16.37h24.13v9.74h-36.28v-60.84h36.28v9.65h-24.13Z')
            path(d='M231.57,684.92h-12.15l-27.23-41.37v41.37h-12.15v-60.84h12.15l27.23,41.71v-41.71h12.15v60.84Z')
            path(d='M313.14,627.17c4.62,2.64,8.27,6.33,10.94,11.07,2.67,4.74,4.01,10.1,4.01,16.07s-1.34,11.35-4.01,16.12c-2.67,4.77-6.32,8.48-10.94,11.12-4.63,2.64-9.78,3.97-15.47,3.97s-10.85-1.32-15.47-3.97c-4.63-2.64-8.27-6.35-10.95-11.12-2.67-4.77-4.01-10.14-4.01-16.12s1.34-11.33,4.01-16.07c2.67-4.74,6.32-8.43,10.95-11.07,4.62-2.64,9.78-3.97,15.47-3.97s10.84,1.32,15.47,3.97Zm-24.86,9.65c-2.7,1.61-4.81,3.92-6.33,6.94-1.52,3.02-2.28,6.54-2.28,10.56s.76,7.54,2.28,10.56c1.52,3.02,3.63,5.33,6.33,6.94,2.7,1.61,5.83,2.41,9.39,2.41s6.69-.8,9.39-2.41c2.7-1.61,4.81-3.92,6.33-6.94,1.52-3.02,2.28-6.53,2.28-10.56s-.76-7.54-2.28-10.56c-1.52-3.02-3.63-5.33-6.33-6.94-2.7-1.61-5.83-2.41-9.39-2.41s-6.69,.8-9.39,2.41Z')
            path(d='M372.82,684.92l-14.22-23.7h-5.34v23.7h-12.15v-60.84h23.18c7.07,0,12.45,1.72,16.16,5.17,3.71,3.45,5.56,7.99,5.56,13.62,0,4.6-1.28,8.45-3.84,11.55s-6.25,5.17-11.07,6.21l15.17,24.3h-13.44Zm-19.56-32.06h10c6.95,0,10.43-3.07,10.43-9.22,0-2.93-.85-5.21-2.54-6.85-1.7-1.64-4.32-2.46-7.89-2.46h-10v18.53Z')
            path(d='M444.43,629.33c5,3.91,8.3,9.22,9.91,15.94h-12.75c-1.32-3.28-3.38-5.86-6.16-7.76-2.79-1.9-6.13-2.84-10.04-2.84-3.22,0-6.12,.8-8.7,2.41-2.59,1.61-4.6,3.91-6.03,6.9-1.44,2.99-2.15,6.49-2.15,10.51s.72,7.44,2.15,10.43c1.44,2.99,3.45,5.29,6.03,6.9s5.49,2.41,8.7,2.41c3.91,0,7.25-.95,10.04-2.84,2.79-1.9,4.84-4.48,6.16-7.76h12.75c-1.61,6.72-4.91,12.04-9.91,15.94s-11.29,5.86-18.87,5.86c-5.8,0-10.93-1.31-15.38-3.92-4.45-2.61-7.9-6.28-10.34-10.99-2.44-4.71-3.66-10.05-3.66-16.03s1.22-11.4,3.66-16.12c2.44-4.71,5.87-8.37,10.3-10.99,4.42-2.61,9.57-3.92,15.43-3.92,7.58,0,13.88,1.95,18.87,5.86Z')
            path(d='M517.77,624.07v60.84h-12.24v-26.46h-26.03v26.46h-12.15v-60.84h12.15v24.65h26.03v-24.65h12.24Z')
            path(d='M544.83,633.73v15.77h21.55v9.31h-21.55v16.37h24.13v9.74h-36.28v-60.84h36.28v9.65h-24.13Z')
            path(d='M621.28,676.86c-1.55,2.62-3.85,4.71-6.9,6.29-3.05,1.58-6.75,2.37-11.12,2.37s-8.16-.73-11.55-2.2c-3.39-1.47-6.11-3.58-8.14-6.33-2.04-2.76-3.2-5.98-3.49-9.65h12.93c.29,2.47,1.28,4.52,2.97,6.16,1.69,1.64,3.95,2.46,6.77,2.46,2.53,0,4.47-.67,5.82-2.03,1.35-1.35,2.03-3.09,2.03-5.21,0-1.9-.55-3.46-1.64-4.7-1.09-1.24-2.47-2.23-4.14-2.97-1.67-.75-3.96-1.61-6.89-2.59-3.79-1.26-6.9-2.51-9.31-3.75-2.41-1.24-4.47-3.03-6.16-5.39-1.7-2.36-2.54-5.43-2.54-9.22,0-5.23,1.88-9.35,5.64-12.37,3.76-3.02,8.75-4.52,14.95-4.52s11.56,1.55,15.38,4.65c3.82,3.1,5.99,7.24,6.51,12.41h-13.1c-.34-2.18-1.26-3.98-2.76-5.39-1.49-1.41-3.53-2.11-6.12-2.11-2.24,0-4.05,.59-5.43,1.77-1.38,1.18-2.07,2.89-2.07,5.13,0,1.78,.53,3.26,1.59,4.44,1.06,1.18,2.41,2.14,4.05,2.89,1.64,.75,3.86,1.58,6.68,2.5,3.91,1.38,7.08,2.67,9.52,3.88,2.44,1.21,4.52,3.02,6.25,5.43,1.72,2.41,2.59,5.57,2.59,9.48,0,3.1-.78,5.96-2.33,8.57Z')
            path(d='M677.81,624.07v9.65h-16.81v51.19h-12.15v-51.19h-16.72v-9.65h45.68Z')
            path(d='M720.13,684.92l-14.22-23.7h-5.34v23.7h-12.15v-60.84h23.18c7.07,0,12.45,1.72,16.16,5.17,3.71,3.45,5.56,7.99,5.56,13.62,0,4.6-1.28,8.45-3.84,11.55s-6.25,5.17-11.07,6.21l15.17,24.3h-13.44Zm-19.56-32.06h10c6.95,0,10.43-3.07,10.43-9.22,0-2.93-.85-5.21-2.54-6.85-1.7-1.64-4.32-2.46-7.89-2.46h-10v18.53Z')
            path(d='M777.18,624.77h-13.87l-22.41,60.16h12.84l2.2-6.24,5.3-15.22,1.42-4.06,7.54-21.61,7.54,21.61,1.42,4.06,3.24,9.22h.04l2.06,6,2.16,6.24h12.84l-22.33-60.16Z')

      if error
        p.error #{error}
      if otp
        form(action = 'signin-otp' method = 'post')
          fieldset
            .input-group.mb-1
              span.input-group-addon
                i.fa.fa-key.fa-fw
              input.form-control(
                autocomplete = 'off'
                autofocus
                name = 'otp'
                type = 'text'
                inputmode = 'numeric'
                placeholder = 'Code'
                required
              )
            div
              button.btn.btn-block
                i.fa.fa-sign-in
                |  Sign in
      else
        if Object.keys(strategies).length !== 0
          form(action = 'signin/dispatch' method = 'post')
            .checkbox
              label
                input(
                  name = 'remember-me'
                  type = 'checkbox'
                )
                | &nbsp;
                | Remember me
            each label, id in strategies
              div: button(type = 'submit' name = 'provider' value = id).btn.btn-block.mb-1 Sign in with #{label}
          hr
        form(action = 'signin/local' method = 'post')
          fieldset
            .input-group.mb-1
              span.input-group-addon
                i.xo-icon-user.fa-fw
              input.form-control(
                autofocus
                name = 'username'
                placeholder = 'Username'
                required
                type = 'text'
              )
            .input-group.mb-1
              span.input-group-addon
                i.fa.fa-key.fa-fw
              input.form-control(
                name = 'password'
                type = 'password'
                placeholder = 'Password'
                required
              )
            .checkbox
              label
                input(
                  name = 'remember-me'
                  type = 'checkbox'
                )
                | &nbsp;
                | Remember me
            div
              button.btn.btn-block
                |  Sign in with password
    script.
      (function () {
        var d = document
        var h = d.location.hash
        d.querySelectorAll('a').forEach(a => {
            a.href += h
        })
        d.querySelectorAll('form').forEach(form => {
            form.action += h
        })
      })()
