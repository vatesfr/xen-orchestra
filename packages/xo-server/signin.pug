doctype html
html
  head
    meta(charset = 'utf-8')
    meta(http-equiv = 'X-UA-Compatible' content = 'IE=edge,chrome=1')
    meta(name = 'viewport' content = 'width=device-width, initial-scale=1.0')
    title Whitestack XOA
    meta(name = 'author' content = 'Vates SAS')
    link(rel = 'stylesheet' href = 'index.css')
    link(rel = 'icon' href = 'assets/favicon.svg' type = 'image/svg+xml')
    style.
      body {
        color: #F8F8F8;
        background-color: #F8F8F8;
        background-image: url('assets/background.jpg');
        background-size: cover;
        background-repeat: no-repeat;
      }
      button {
        background-color: #002263;
        color: #F8F8F8;
      }
      .error {
        color: #EC535D;
      }
      @media (prefers-color-scheme: light) {
        body {
          color: #1A1B38;
          background-color: #FFFFFF;
        }
        .error {
          color: #BE1621;
        }
      }
  body(style = 'display: flex; flex-direction: column; padding-top: 20%; gap: 4em; min-height: 100vh;')
    div(style = 'margin: auto; width: 30em;')
      img(src = 'assets/logo.svg')
      p(style = 'text-align: right; font-style: italic; font-weight: bold; opacity: 0.6;') hydron-1
    div(style = 'margin: auto; width: 35em; background-color: rgba(255, 255, 255, 0.8); padding: 5em; border-radius: 4px;')
      if error
        p.error #{error}
      if otp
        form(action = 'signin-otp' method = 'post')
          fieldset
            .input-group.mb-1
              span.input-group-addon
                i.fa.fa-key.fa-fw
              input.form-control(
                autocomplete = 'off'
                autofocus
                name = 'otp'
                type = 'text'
                inputmode = 'numeric'
                placeholder = 'Code'
                required
              )
            div
              button.btn.btn-block
                i.fa.fa-sign-in
                |  Sign in
      else
        if Object.keys(strategies).length !== 0
          form(action = 'signin/dispatch' method = 'post')
            .checkbox
              label
                input(
                  name = 'remember-me'
                  type = 'checkbox'
                )
                | &nbsp;
                | Remember me
            each label, id in strategies
              div: button(type = 'submit' name = 'provider' value = id).btn.btn-block.mb-1 Sign in with #{label}
          hr
        form(action = 'signin/local' method = 'post')
          fieldset
            .input-group.mb-1
              span.input-group-addon
                i.xo-icon-user.fa-fw
              input.form-control(
                autofocus
                name = 'username'
                placeholder = 'Username'
                required
                type = 'text'
              )
            .input-group.mb-1
              span.input-group-addon
                i.fa.fa-key.fa-fw
              input.form-control(
                name = 'password'
                type = 'password'
                placeholder = 'Password'
                required
              )
            .checkbox
              label
                input(
                  name = 'remember-me'
                  type = 'checkbox'
                )
                | &nbsp;
                | Remember me
            div
              button.btn.btn-block
                |  Log in
    script.
      (function () {
        var d = document
        var h = d.location.hash
        d.querySelectorAll('a').forEach(a => {
            a.href += h
        })
        d.querySelectorAll('form').forEach(form => {
            form.action += h
        })
      })()
    footer(style='display: flex; justify-content: space-between; align-items: center; color: white; background-color: #002263; padding: 10px 20px;')
      img(src='assets/ws_white.png' style='height: 30px;')
      p(style='text-align: rigth; font-weight: bold; margin: 0;') Â© 2025 Whitestack LLC and subsidiaries. All rights reserved.
